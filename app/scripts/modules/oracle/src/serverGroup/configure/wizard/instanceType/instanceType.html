<!-- Image selection -->
<div class="form-group" ng-if="!command.viewState.disableImageSelection">
  <div class="col-md-3 sm-label-right">
    Image
  </div>
  <div class="col-md-9">
    <ui-select class="form-control input-sm" required
               ng-model="command.imageId">
      <ui-select-match placeholder="Select an image">{{$select.selected.name}}</ui-select-match>
      <ui-select-choices repeat="image.id as image in command.backingData.filtered.images">
        <span ng-bind-html="image.name | highlight: $select.search"></span>
      </ui-select-choices>
    </ui-select>
  </div>
</div>

<!-- Shape selection -->
<div class="form-group">
  <div class="col-md-3 sm-label-right">
    Shape
  </div>
  <div class="col-md-9">
    <ui-select class="form-control input-sm" required
               ng-model="command.shape">
      <ui-select-match placeholder="Select compatible shape">{{$select.selected.name}}</ui-select-match>
      <ui-select-choices repeat="shape.name as shape in (!command.viewState.disableImageSelection
                                                         ? command.backingData.filtered.shapes[command.imageId]
                                                         : command.backingData.filtered.allShapes)">
        <span ng-bind-html="shape.name"></span>
      </ui-select-choices>
    </ui-select>
  </div>
</div>
