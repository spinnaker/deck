<div ng-controller="ManualJudgmentExecutionDetailsCtrl as manualCtrl">
  <execution-details-section-nav sections="configSections"></execution-details-section-nav>
  <div class="step-section-details" ng-if="detailsSection === 'manualJudgment'">
    <dl class="no-margin">
      <dt ng-if-start="stage.context.judgmentStatus || ['SKIPPED', 'SUCCEEDED'].includes(stage.status)">Judgment</dt>
      <dd ng-if-end>{{ (stage.context.judgmentStatus || 'No judgment made') | robotToHuman }}</dd>
      <dd ng-if="stage.status === 'SKIPPED'">Skipped</dd>
      <dt ng-if="stage.context.lastModifiedBy">Judged By</dt>
      <dd ng-if="stage.context.lastModifiedBy">
        <span ng-bind="stage.context.lastModifiedBy"></span>
        <span ng-if="stage.context.propagateAuthenticationContext">(<em>authentication propagated</em>)</span> <br/>
        {{ stage.endTime | timestamp }}
      </dd>
      <dt ng-if="stage.context.judgmentInput">Input</dt>
      <dd ng-if="stage.context.judgmentInput">{{ stage.context.judgmentInput | robotToHuman}}</dd>
    </dl>
    <manual-judgment-selector application="application" execution="execution" stage="stage"></manual-judgment-selector>
    <stage-failure-message stage="stage" is-failed="stage.isFailed && !stage.context.judgmentStatus" message="stage.failureMessage"></stage-failure-message>
  </div>

  <div class="step-section-details" ng-if="detailsSection === 'taskStatus'">
    <div class="row">
      <execution-step-details item="stage"></execution-step-details>
    </div>
  </div>
</div>
